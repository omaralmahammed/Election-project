@model project5_voting.Models.Contact

@{
    ViewBag.Title = "Response";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";

}



@using (Html.BeginForm("Response", "Contacts", FormMethod.Post, new { @onsubmit = "displayAlert(this); return false;" }))
{
    @Html.AntiForgeryToken()

    <div class="card" dir="rtl" style="width: 700px; margin:100px auto">
        <div class="card-body">

            <h2 class="text-center my-4">الرد الخاص بالادارة</h2>

            <div class="row g-3">
                <div class="col-md-6">
                    <p class="form-label" style="text-align:right; margin-bottom:0 !important">الاسم</p>
                    @Html.EditorFor(model => model.name, new { htmlAttributes = new { @class = "form-control mb-3", @readonly = "readonly" } })
                </div>
                <div class="col-md-6">
                    <p class="form-label" style="text-align:right ; margin-bottom:0 !important" ">البريد الإلكتروني</p>
                    @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "form-control mb-3", @readonly = "readonly" } })
                </div>

                <div class="col-12">
                    <p class="form-label" style="text-align:right ; margin-bottom:0 !important" ">اسم المسؤول</p>
                    @Html.EditorFor(model => model.adminName, new { htmlAttributes = new { @class = "form-control mb-3", @readonly = "readonly" } })
                </div>

                <div class="col-12">
                    <p class="form-label" style="text-align:right ; margin-bottom:0 !important" ">الموضوع</p>
                    @Html.EditorFor(model => model.subject, new { htmlAttributes = new { @class = "form-control mb-3" } })
                </div>

                <div class="col-12">
                    <p class="form-label" style="text-align:right ; margin-bottom:0 !important" ">الرد على الرسالة</p>
                    @Html.TextAreaFor(model => model.adminResponse, new { @class = "form-control mb-3", @id = "floatingTextarea", @style = "height: 100px;" })
                </div>

                <div style="display: none">
                    @Html.EditorFor(model => model.date, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.EditorFor(model => model.time, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.EditorFor(model => model.message, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.EditorFor(model => model.status, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.EditorFor(model => model.rsponseDate, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.EditorFor(model => model.rsponseTime, new { htmlAttributes = new { @class = "form-control" } })
                </div>

                <div class="text-center mt-4">
                    @Html.ActionLink("العودة", "AdminContact", "Contacts", new { @class = "btn btn-secondary mx-2" })
                    <input type="submit" value="إرسال" class="btn btn-info mx-2 " onclick="displayAlert()" />
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script type="text/javascript">


    function displayAlert(form) {
        Swal.fire({
            title: "لقد تم الرد على هذه الرسالة",
            text: "لرؤية الرد يمكن الضغط على التفاصيل",
            showConfirmButton: false,
            timer: 3000
        });

        setTimeout(function () {
            form.submit();
        }, 3000);
    }
</script>